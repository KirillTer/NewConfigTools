/**
 * inversify-logger-middleware v.1.0.1 - A basic logger middleware for InversifyJS
 * Copyright (c) 2015 Remo H. Jansen <remo.jansen@wolksoftware.com> (http://www.remojansen.com)
 * MIT inversify.io/LICENSE
 * https://github.com/inversify/inversify-logger-middleware#readme
 */
"use strict";
var binding_reducer_1 = require("./binding_reducer");
var target_reducer_1 = require("./target_reducer");
function requestReducer(request, options) {
    var reducedRequest = {};
    var requestOptions = options;
    if (requestOptions.serviceIdentifier === true) {
        reducedRequest.serviceIdentifier = request.serviceIdentifier;
    }
    if (requestOptions.bindings !== undefined) {
        var reducedBindings = request.bindings.map(function (binding) {
            return binding_reducer_1.default(binding, options.bindings);
        });
        reducedRequest.bindings = reducedBindings;
    }
    if (requestOptions.target !== undefined && request.target !== null) {
        reducedRequest.target = target_reducer_1.default(request.target, options.target);
    }
    var reducedChieldRequest = request.childRequests.map(function (childRequest) {
        return requestReducer(childRequest, options);
    });
    reducedRequest.childRequests = reducedChieldRequest;
    return reducedRequest;
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = requestReducer;
