"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var React = require("react");
var redux_1 = require("redux");
var react_redux_1 = require("react-redux");
var bindings_actions_1 = require("../../actions/bindings_actions");
var kernel_explorer_1 = require("../../components/kernel_explorer");
var binding_explorer_1 = require("../../components/binding_explorer");
var binding_props_explorer_1 = require("../../components/binding_props_explorer");
function mapStateToPropsReposPage(state) {
    return {
        app: state.get("app")
    };
}
function mapDispatchToPropsReposPage(dispatch) {
    return { actions: redux_1.bindActionCreators(bindings_actions_1.default, dispatch) };
}
var BindingsPage = (function (_super) {
    __extends(BindingsPage, _super);
    function BindingsPage() {
        _super.apply(this, arguments);
    }
    BindingsPage.prototype.render = function () {
        var kernels = this.props.app.get("kernels").toJSON();
        var selectedKernel = kernels.filter(function (kernel) {
            return kernel.selected === true;
        })[0];
        var dictionary = [];
        var valuesOfSelectedKey = [];
        if (selectedKernel) {
            var _details = selectedKernel.details;
            dictionary = (_details._bindingDictionary._dictionary);
            var selectedKeyVal = dictionary.filter(function (keyVal) {
                return keyVal.selected === true;
            })[0];
            valuesOfSelectedKey = selectedKeyVal ? selectedKeyVal.value : [];
        }
        var selectedKernelGuid = selectedKernel ? selectedKernel.details.guid : "";
        return (React.createElement("div", null, React.createElement(kernel_explorer_1.default, {height: this.props.app.get("windowHeight"), columnSize: 4, kernels: kernels, selectKernel: this.props.actions.selectKernel.bind(this)}), React.createElement(binding_explorer_1.default, {height: this.props.app.get("windowHeight"), columnSize: 4, dictionary: dictionary, kernelGuid: selectedKernelGuid, selectBinding: this.props.actions.selectBinding.bind(this)}), React.createElement(binding_props_explorer_1.default, {height: this.props.app.get("windowHeight"), columnSize: 4, bindings: valuesOfSelectedKey})));
    };
    return BindingsPage;
}(React.Component));
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = react_redux_1.connect(mapStateToPropsReposPage, mapDispatchToPropsReposPage)(BindingsPage);
